---
title: "WhatsInSeason"
author: "Annie Johansson"
date: "5/26/2022"
output: html_document
---

```{r Load Packages, include=FALSE}

library(tinytex)
library(WhatsInSeason)
library(tidyverse)

```


WhatsInSeason is an r package intended to help you eat more consciously. It can retrieve and visualize nutritional and climate-impact data about most types of fresh produce.  

# Water Footprint data 

Over 2.7 billion people are affected by scarce water resources yearly. The water footprint metric, created by Arjen Hoekstra, is a type of environmental footprint that helps us to understand how the human consumption of different products is affecting the earth's natural water sources. Making conscious choices about which products to consume will aid in reducing our water foot print and ultimately preserve water for people and nature.  

The water footprint data used in this package comes from The Water Footprint Network (https://waterfootprint.org/en/). The dataset comprises the green, blue, and grey water footprints for a wide range of food products on a global, national, and regional scale.  

#### Types of Water Footprints

```{r, echo = FALSE}
library(gt)
dat <- data.frame(Type = c("Green", "Blue", "Grey"), 
           Explanation = c("Water acquired by the crop/plant directly from natural sources, such as precipitation.", 
                           "Water that has been sourced from surface or groundwater resources.", 
                           "The amount of freshwater that needs to be discharged into the water source to remove pollutants and meet water quality standards."))

gt(dat) %>% 
  tab_options(column_labels.hidden = TRUE)%>% 
  data_color(columns = Type, 
             colors = c("lightblue", "darkseagreen", "slategrey"),
             apply_to = c("fill", "text"),
             autocolor_text = FALSE) %>% 
  data_color(columns = Explanation, 
             colors = c("slategrey", "darkseagreen", "lightblue"),
             apply_to = c("fill", "text"),
             autocolor_text = FALSE, 
             alpha = 0.3) 
```
Read more: https://waterfootprint.org/en/water-footprint/what-is-water-footprint/ 

## Water Footprint Functions 

### Retrieve and visualize global water footprint data 

The function **wf_global()** creates a table of water footprint data for a specific food item. 
Let's say you're interested in the global green, blue, and grey water footprint for the production of bananas: 


```{r, warning=FALSE}
# wf_global(banana) 
# output is not nice, need to update function first. 
```
  
  You can plot this data with the function **wf_global_plot()**:  
```{r, warning=FALSE}
plot_wf_global(banana)
```

### Retrieve and visualize national water footprint data 

The function **wf_country()** creates a table of water footprint data for a specific food item for a specified country.  
**Arguments:**  _food_ and _country_.  

<!-- You should input the country name according the FIPS country codes. -->
<!-- ```{r, eval = FALSE} -->
<!-- countries() -->
<!-- ``` -->
<!-- Use this function to retrieve the country codes for each country. -->

```{r, warning=FALSE}
wf_country(wheat, NL)
```

It might be interesting to see the water footprint of wheat production in the Netherlands compared to other countries across Europe.  
You can  plot the national water footprints of all countries using the function **wf_country_plot**. This is done per continent.  

```{r, warning=FALSE}
wf_country_plot(wheat, Europe)
```
  
_It seems like Portugal has a large water footprint for wheat production. It also seems like the water footprint of wheat production across Europe is mainly comprised of water sourced from surface or groundwater resources - interesting!_  

### Retrieve and visualize regional water footprint data 

Some countries, such as the US, have very different climates in different regions. The **wf_region()** and **wf_region_plot()** retrieves water footprint data of a food item per region of the specified country. 

```{r, warning=FALSE, fig.height = 10, fig.width=20}
wf_region(avocado, America)
wf_region_plot(corn, America)
```

# Nutritional data  
  
Several functions in the WhatsInSeason package allow you to retrieve and visualize nutritional data of fresh produce items. This data is taken from the Food Database API  https://www.edamam.com. With these functions you can:  
  
* Search for food items in the database.  
* View data about nutrients, calories, carbohydrates, fat, and fibre of food items.  
* Compare two different food items based on a nutritional metric.  
* Plot the nutritional data of the food item.

**Add examples of functions here** 

# Search function 

To check whether the food is available in the (nutritional) database, use the **search_food()** function. 

```{r, warning=FALSE}
search_food("banana")
# To mask the image, use the argument picture = FALSE: 
# search_food("banana", picture = FALSE)
```

  





